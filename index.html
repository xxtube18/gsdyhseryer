<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>NEVETHON-DO-JON-MULTSTREAM</title>
    <style>
        :root { 
            --bg: #050505; 
            --panel: rgba(15, 15, 20, 0.95); 
            --accent: #00F2FF; 
            --nevethon: #FF4500; /* LARANJA VIBRANTE */
            --save: #39FF14; 
        }

        body { 
            font-family: 'Poppins', sans-serif; 
            background: radial-gradient(circle at center, #1A0033, #050505);
            color: WHITE; margin: 0; padding: 20px; min-height: 100vh;
            text-transform: UPPERCASE; /* FORÃ‡A TUDO EM MAIÃšSCULO */
        }

        .header {
            background: var(--panel);
            backdrop-filter: blur(15px);
            padding: 20px; border-radius: 15px;
            display: flex; gap: 12px; flex-wrap: wrap;
            margin-bottom: 30px; border: 2px solid var(--nevethon);
            align-items: center; box-shadow: 0 0 30px rgba(255, 69, 0, 0.3);
        }

        .brand { 
            font-weight: 900; 
            background: linear-gradient(to right, var(--nevethon), #FFF); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            font-size: 1.6rem; 
            letter-spacing: 2px;
        }

        input, select { 
            padding: 12px; border-radius: 8px; border: 1px solid #333; 
            background: rgba(0,0,0,0.8); color: WHITE; outline: none; 
            text-transform: UPPERCASE; font-weight: BOLD;
        }
        input:focus { border-color: var(--nevethon); box-shadow: 0 0 15px rgba(255, 69, 0, 0.5); }

        button { padding: 12px 20px; border-radius: 8px; border: none; cursor: pointer; font-weight: 900; transition: 0.3s; text-transform: UPPERCASE; }
        .btn-add { background: var(--accent); color: #000; }
        .btn-share { background: var(--nevethon); color: #FFF; box-shadow: 0 0 20px rgba(255, 69, 0, 0.4); }
        .btn-share:hover { transform: scale(1.05); box-shadow: 0 0 35px rgba(255, 69, 0, 0.7); }

        .stream-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(480px, 1fr)); gap: 20px; }
        .video-container { position: relative; background: #000; aspect-ratio: 16 / 9; border-radius: 12px; overflow: hidden; border: 2px solid #222; transition: 0.4s; }
        .video-container:hover { border-color: var(--nevethon); transform: scale(1.01); }
        
        iframe { width: 100%; height: 100%; border: none; }
        
        .remove-btn { position: absolute; top: 10px; right: 10px; background: rgba(255, 0, 0, 0.8); color: WHITE; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; z-index: 5; font-weight: 900; }
        
        .tag { position: absolute; bottom: 10px; left: 10px; background: rgba(0,0,0,0.8); padding: 5px 15px; border-radius: 20px; border: 1px solid var(--accent); color: var(--accent); font-size: 12px; }

        #shareArea { margin-top: 15px; padding: 20px; background: #000; border-radius: 10px; display: none; width: 100%; word-break: break-all; border: 2px dashed var(--nevethon); color: WHITE; font-size: 14px; }
    </style>
</head>
<body>

<div class="header">
    <div class="brand">NEVETHON @COACH_LIPEE</div>
    <input type="text" id="eventName" value="NEVETHON-DO-JON" placeholder="NOME DO EVENTO">
    <input type="text" id="streamInput" placeholder="NOME DO CANAL OU LINK">
    <select id="platformSelect">
        <option value="twitch">TWITCH</option>
        <option value="kick">KICK</option>
        <option value="youtube">YOUTUBE</option>
    </select>
    <button class="btn-add" onclick="addNewStream()">+ ADICIONAR TELA</button>
    <button class="btn-share" onclick="generateShareLink()">ðŸ”— GERAR LINK NEVETHON</button>
    <button onclick="clearAll()" style="background:transparent; color:#666; border:1px solid #333;">LIMPAR TUDO</button>
    <div id="shareArea"></div>
</div>

<div id="grid" class="stream-grid"></div>

<script>
    const DB_KEY = 'NEVETHON_FINAL_STORAGE';
    let activeStreams = [];

    window.onload = function() {
        const urlParams = new URLSearchParams(window.location.search);
        const config = urlParams.get('config');
        const eventParam = urlParams.get('event');

        if (eventParam) {
            const decoded = decodeURIComponent(eventParam).toUpperCase();
            document.getElementById('pageTitle').innerText = decoded + "-MULTSTREAM";
            document.getElementById('eventName').value = decoded;
        }

        if (config) {
            try {
                activeStreams = JSON.parse(atob(config));
                saveToLocal(); 
                activeStreams.forEach(item => renderStream(item.val, item.type));
            } catch(e) { loadFromLocal(); }
        } else { loadFromLocal(); }
    };

    function loadFromLocal() {
        const stored = localStorage.getItem(DB_KEY);
        if (stored) {
            activeStreams = JSON.parse(stored);
            activeStreams.forEach(item => renderStream(item.val, item.type));
        }
    }

    function addNewStream() {
        const input = document.getElementById('streamInput');
        const platform = document.getElementById('platformSelect').value;
        let val = input.value.trim();
        if (!val) return;

        let type = platform;
        if (val.includes("youtube.com") || val.includes("youtu.be")) type = "youtube";
        else if (val.includes("twitch.tv")) type = "twitch";
        else if (val.includes("kick.com")) type = "kick";

        activeStreams.push({ val: val, type: type });
        if (renderStream(val, type)) { 
            saveToLocal(); 
            input.value = ""; 
        } else { 
            activeStreams.pop(); 
        }
    }

    function renderStream(inputVal, type) {
        let channel = inputVal;
        const domain = window.location.hostname || "localhost";
        
        if (inputVal.includes("http")) {
            if (inputVal.includes("v=")) {
                channel = inputVal.split("v=")[1].split("&")[0];
            } else {
                channel = inputVal.split('/').filter(Boolean).pop().split(/[?#]/)[0];
            }
        }

        let url = "";
        if (type === "twitch") url = `https://player.twitch.tv/?channel=${channel}&parent=${domain}`;
        else if (type === "kick") url = `https://player.kick.com/${channel}`;
        else if (type === "youtube") url = `https://www.youtube-nocookie.com/embed/${channel}?autoplay=1`;

        if (url) {
            const div = document.createElement('div');
            div.className = 'video-container';
            div.innerHTML = `
                <button class="remove-btn" onclick="removeStream('${inputVal}', this)">REMOVER</button>
                <div class="tag">${type.toUpperCase()}: ${channel.toUpperCase()}</div>
                <iframe src="${url}" allowfullscreen allow="autoplay; encrypted-media"></iframe>
            `;
            document.getElementById('grid').appendChild(div);
            return true;
        }
        return false;
    }

    function generateShareLink() {
        if (activeStreams.length === 0) return alert("ADICIONE TELAS PRIMEIRO!");
        const name = encodeURIComponent(document.getElementById('eventName').value.toUpperCase() || "NEVETHON");
        const encoded = btoa(JSON.stringify(activeStreams));
        const shareUrl = window.location.origin + window.location.pathname + "?event=" + name + "&config=" + encoded;
        
        const area = document.getElementById('shareArea');
        area.style.display = "block";
        area.innerHTML = `<strong>LINK DO EVENTO GERADO COM SUCESSO:</strong><br>${shareUrl}`;
        navigator.clipboard.writeText(shareUrl);
        alert("LINK COPIADO! AGORA Ã‰ SÃ“ DIVULGAR!");
    }

    function saveToLocal() { localStorage.setItem(DB_KEY, JSON.stringify(activeStreams)); }
    function removeStream(val, btn) { 
        activeStreams = activeStreams.filter(i => i.val !== val); 
        saveToLocal(); 
        btn.parentElement.remove(); 
    }
    function clearAll() { 
        if(confirm("LIMPAR TUDO?")) {
            localStorage.removeItem(DB_KEY); 
            location.href = window.location.pathname; 
        }
    }
</script>
</body>
</html>
