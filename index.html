<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>NEVETHON - BUSCA POR NOME</title>
    <style>
        :root { --bg: #050505; --nevethon: #FF4500; --accent: #00F2FF; }
        body { font-family: 'Poppins', sans-serif; background: var(--bg); color: white; margin: 0; padding: 20px; text-transform: uppercase; }
        
        .header { background: rgba(15,15,20,0.98); padding: 20px; border-radius: 15px; border: 2px solid var(--nevethon); display: flex; gap: 10px; margin-bottom: 25px; align-items: center; flex-wrap: wrap; }
        input, select { padding: 12px; border-radius: 8px; border: 1px solid #333; background: #000; color: white; font-weight: bold; outline: none; }
        input { flex-grow: 1; }
        
        .btn { padding: 12px 20px; border-radius: 8px; border: none; cursor: pointer; font-weight: 900; text-transform: uppercase; transition: 0.3s; }
        .btn-add { background: var(--accent); color: #000; }
        .btn-link { background: var(--nevethon); color: #fff; }
        .btn:hover { opacity: 0.8; transform: translateY(-2px); }

        .monitor-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(480px, 1fr)); gap: 20px; }
        .card { position: relative; background: #000; border: 2px solid #222; border-radius: 15px; overflow: hidden; display: flex; flex-direction: column; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        
        /* OVERLAY DOS NÃšMEROS */
        .overlay { position: absolute; top: 15px; left: 15px; display: flex; gap: 10px; z-index: 100; pointer-events: none; }
        .badge { background: rgba(0,0,0,0.85); padding: 10px 15px; border-radius: 8px; border-left: 4px solid var(--nevethon); backdrop-filter: blur(10px); }
        .val { font-size: 1.5rem; font-weight: 900; color: var(--accent); font-family: monospace; }
        
        .video-container { width: 100%; aspect-ratio: 16/9; background: #000; }
        iframe { width: 100%; height: 100%; border: none; }

        .sync-bar { background: #111; padding: 10px; display: flex; gap: 10px; align-items: center; border-top: 1px solid #222; }
        .sync-input { width: 110px; font-size: 12px; padding: 5px; }
        
        #shareArea { margin-top: 20px; padding: 15px; border: 2px dashed var(--accent); color: var(--accent); display: none; word-break: break-all; border-radius: 10px; background: rgba(0,242,255,0.05); }
    </style>
</head>
<body>

<div class="header">
    <div style="font-weight:900; color:var(--nevethon); margin-right:10px;">NEVETHON BUSCA</div>
    <select id="platSelect">
        <option value="kick">KICK</option>
        <option value="twitch">TWITCH</option>
        <option value="youtube">YOUTUBE</option>
    </select>
    <input type="text" id="nameInput" placeholder="NOME DO STREAMER (EX: JONVLOGS)">
    <button class="btn btn-add" onclick="addByName()">ADICIONAR</button>
    <button class="btn btn-link" onclick="generateLink()">ðŸ”— COMPARTILHAR PAINEL</button>
</div>

<div id="shareArea"></div>
<div id="grid" class="monitor-grid"></div>

<script>
    let activeStreams = [];

    function addByName() {
        const name = document.getElementById('nameInput').value.trim();
        const plat = document.getElementById('platSelect').value;
        if(!name) return;
        
        let embedUrl = "";
        let id = name.toLowerCase();

        if(plat === 'kick') embedUrl = `https://player.kick.com/${id}`;
        else if(plat === 'twitch') embedUrl = `https://player.twitch.tv/?channel=${id}&parent=${window.location.hostname}`;
        else if(plat === 'youtube') embedUrl = `https://www.youtube.com/embed/live_stream?channel=${id}`; // Tenta carregar live atual do canal

        const streamObj = { id, embedUrl, viewers: 0, plat };
        activeStreams.push(streamObj);
        renderCard(streamObj);
        document.getElementById('nameInput').value = "";
    }

    function renderCard(obj) {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
            <div class="overlay">
                <div class="badge">
                    <span style="font-size:0.6rem; display:block; color:#aaa;">ðŸ”´ ${obj.id} @ ${obj.plat}</span>
                    <span class="val" id="viewers-${obj.id}">0</span>
                </div>
            </div>
            <div class="video-container"><iframe src="${obj.embedUrl}" allowfullscreen></iframe></div>
            <div class="sync-bar">
                <span style="font-size: 10px;">PÃšBLICO REAL:</span>
                <input type="number" class="sync-input" id="input-${obj.id}" placeholder="DIGITE O VALOR">
                <button class="btn" style="background:var(--accent); color:000; padding:5px 10px; font-size:10px;" onclick="syncValue('${obj.id}')">SINCRONIZAR</button>
                <button class="btn" style="background:red; color:white; padding:5px 10px; font-size:10px; margin-left:auto;" onclick="removeStream('${obj.id}', this)">REMOVER</button>
            </div>
        `;
        document.getElementById('grid').appendChild(card);
        startLiveUpdate(obj.id);
    }

    function syncValue(id) {
        const val = document.getElementById(`input-${id}`).value;
        if(val) {
            const stream = activeStreams.find(s => s.id === id);
            if(stream) stream.viewers = parseInt(val);
        }
    }

    function startLiveUpdate(id) {
        setInterval(() => {
            const stream = activeStreams.find(s => s.id === id);
            const display = document.getElementById(`viewers-${id}`);
            if(stream && display) {
                // OscilaÃ§Ã£o automÃ¡tica apÃ³s sincronia
                let oscilacao = Math.floor(Math.random() * 9) - 4; // Muda entre -4 e +4
                stream.viewers += oscilacao;
                if(stream.viewers < 0) stream.viewers = 0;
                display.innerText = stream.viewers.toLocaleString('pt-BR');
            }
        }, 700);
    }

    function removeStream(id, btn) {
        activeStreams = activeStreams.filter(s => s.id !== id);
        btn.parentElement.parentElement.remove();
    }

    function generateLink() {
        if(activeStreams.length === 0) return alert("Adicione uma live primeiro!");
        const config = btoa(JSON.stringify(activeStreams));
        const finalUrl = `${window.location.origin}${window.location.pathname}?config=${config}`;
        const area = document.getElementById('shareArea');
        area.style.display = "block";
        area.innerHTML = `<strong>LINK DO PAINEL CONFIGURADO:</strong><br>${finalUrl}`;
        navigator.clipboard.writeText(finalUrl);
        alert("Link copiado! VocÃª pode enviar para qualquer pessoa.");
    }

    window.onload = () => {
        const params = new URLSearchParams(window.location.search);
        const config = params.get('config');
        if(config) {
            try {
                activeStreams = JSON.parse(atob(config));
                activeStreams.forEach(renderCard);
            } catch(e) { console.error("Erro ao carregar link."); }
        }
    }
</script>
</body>
</html>
